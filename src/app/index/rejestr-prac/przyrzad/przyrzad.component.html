@if (przyrzad) {

<div class="przyrzadWrapper p-2 d-flex gap-2">
  <div>
  <table>
    <tr>
      <td>Oznaczenie przyrządu:</td>
      <td> <input type="text" class="form-control"  [(ngModel)]="przyrzad!.oznaczenie"></td>
    </tr>
    <tr>
      <td>Nazwa przyrządu:</td>
      <td><input type="text" class="form-control" [(ngModel)]="przyrzad!.nazwa"></td>
    </tr>
    <tr>
      <td>Numer przewodnika:</td>
      <td><input type="text" class="form-control" [(ngModel)]="przyrzad!.nr_przewodnika"></td>
    </tr>
    <tr>
      <td>Termin:</td>
      <td><input type="date" class="form-control" [(ngModel)]="przyrzad!.termin_wykonania"></td>
    </tr>
    <tr>
      <td>Inne:</td>
      <td><input type="text" class="form-control" [(ngModel)]="przyrzad!.inne"></td>
    </tr>
    <tr class="liniaTop liniaLeft liniaRight">
      <td colspan="2"><small class=" maleLitery">UWAGA: Ustawiony termin rozkroju i status różny od zakończonego skutkuje przypomnieniem widocznym w <a href="../../produkcja/rozkroje/panel">panelu rozkroju.</a></small></td>
    </tr>
    <tr class="liniaRight liniaLeft">
      <td>Termin rozkroju:</td>
      <td><input type="date" class="form-control" [(ngModel)]="przyrzad!.rozkroj_termin"></td>
    </tr>
    <tr class="liniaRight liniaLeft">
      <td>Status rozkroju:</td>
      <td> <select class="form-control"  [(ngModel)]="przyrzad!.rozkroj_status">

          <option value="null">Brak statusu</option>
          <option value="nie rozpoczety">Rozkrój nie rozpoczęty</option>
          <option value="rozpoczety">Rozkrój rozpoczęty</option>
          <option value="zakonczony">Zakończony</option>


      </select></td>
    </tr>
    <tr class="liniaRight liniaLeft liniaBottom" >
      <td>Uwaga do rozkroju:</td>
      <td><input type="text" class="form-control" [(ngModel)]="przyrzad!.nazwa"></td>
    </tr>
    <tr>
      <td>Utworzono:</td>
      <td>{{przyrzad!.created_at}}</td>
    </tr>
    <tr>
      <td>Edytowano:</td>
      <td>{{przyrzad!.updated_at}}</td>
    </tr>
    <tr>
      <td colspan="2"><button class="btn btn-primary w-100">ZAPISZ</button></td>

    </tr>

  </table>
  </div>
  @if (przyrzad!.id) {
  <div class="statusyWrapper">
    <div></div>
    <table>
      <thead>
      <tr>
        <th>lp</th>
        <th>Typ statusu</th>
        <th>Status</th>
        <th>Zaawansowanie</th>
        <th>Uwaga</th>
        <th>Osoba</th>
        <th>Data utworzenia wpisu</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>-</td>
        <td>-</td>
        <td><input type="text" class="form-control" [(ngModel)]="status!.status"></td>
        <td><input type="number" class="form-control" [(ngModel)]="status!.zaawansowanie"></td>
        <td><input type="text" class="form-control" [(ngModel)]="status!.uwaga"></td>
        <td>osoba?</td>
        <td>-</td>
        <td><button class="btn btn-primary" (click)="zapiszNowyStatus()">Zapisz</button></td>
      </tr>
        @for (status of przyrzad!.statusy; track $index) {
          <tr>
            <td>{{$index+1}}</td>
            <td> @if(status.autostatus === 1) { Automatyczny } @else { Zwykły } </td>
            <td>{{status.status}}</td>
            <td>
              @if (status.zaawansowanie) {
              <div style="width: 100%;  background-color: #f3f3f3; border-radius: 4px; height: 23px; position: relative">
              <div [style.width.%]="status.zaawansowanie" style="position: absolute; top: 0; background-color: #76c7c0; height: 23px; border-radius: 4px">
                {{status.zaawansowanie}}%</div>
            </div>} @else {
                -
              }
            </td>
            <td>{{status.uwaga}}</td>
            <td>{{status.osoba.login}}</td>
            <td>{{status.created_at}}</td>
            <td  class="przyciskUsun"><button class="btn btn-danger w-100 shadow-sm" (click)="usunWybranyStatus(status.id)">Usuń</button></td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  }
</div>

}
